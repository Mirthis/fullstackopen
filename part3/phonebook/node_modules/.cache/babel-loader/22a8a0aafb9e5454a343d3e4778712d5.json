{"ast":null,"code":"import _asyncToGenerator from\"/home/mirthis/fullstackopen/part2/phonebook/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/mirthis/fullstackopen/part2/phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/mirthis/fullstackopen/part2/phonebook/node_modules/@babel/runtime/regenerator/index.js\";import{useEffect,useState}from\"react\";import Filter from\"./components/Filter\";import PersonForm from\"./components/PersonForm\";import Persons from\"./components/Persons\";import personsService from\"./services/persons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),filter=_useState8[0],setFilter=_useState8[1];var loadData=function loadData(){personsService.getAll().then(function(data){return setPersons(data);}).catch(function(err){return console.log(err);});};useEffect(loadData,[]);var updatePerson=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id,personData){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return personsService.update(id,personData);case 3:data=_context.sent;setPersons(persons.map(function(p){return p.id===data.id?data:p;}));_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function updatePerson(_x,_x2){return _ref.apply(this,arguments);};}();var createPerson=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(personData){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return personsService.create(personData);case 3:data=_context2.sent;setPersons(persons.concat(data));_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function createPerson(_x3){return _ref2.apply(this,arguments);};}();var deletePerson=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return personsService.delete_person(id);case 3:setPersons(persons.filter(function(p){return p.id!==id;}));_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function deletePerson(_x4){return _ref3.apply(this,arguments);};}();var submitForm=function submitForm(e){e.preventDefault();var newPerson={name:newName,number:newNumber};var knownPerson=persons.find(function(i){return i.name===newName;});if(knownPerson){var msg=\"\".concat(newName,\" is already added to phonebook, replace the old number with a new one\");if(!window.confirm(msg)){return;}updatePerson(knownPerson.id,newPerson);}else{createPerson(newPerson);}setNewName(\"\");setNewNumber(\"\");};var onNameChange=function onNameChange(e){setNewName(e.target.value);};var onNumberChange=function onNumberChange(e){setNewNumber(e.target.value);};var onFilterChange=function onFilterChange(e){setFilter(e.target.value);};var onDeleteClick=function onDeleteClick(e){var toDeleteId=+e.target.dataset.id;var toDeleteObj=persons.find(function(p){return p.id===toDeleteId;});if(window.confirm(\"Delete \".concat(toDeleteObj.name))){deletePerson(toDeleteId);}};var showPersons=filter===\"\"?persons:persons.filter(function(p){return p.name.toLowerCase().includes(filter.toLowerCase());});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Filter,{onSubmit:submitForm,filter:filter,onFilterChange:onFilterChange}),/*#__PURE__*/_jsx(\"h3\",{children:\"add a new\"}),/*#__PURE__*/_jsx(PersonForm,{onSubmit:submitForm,onNameChange:onNameChange,onNumberChange:onNumberChange,name:newName,number:newNumber}),/*#__PURE__*/_jsx(\"h3\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{persons:showPersons,onDeleteClick:onDeleteClick})]});};export default App;","map":{"version":3,"sources":["/home/mirthis/fullstackopen/part2/phonebook/src/App.js"],"names":["useEffect","useState","Filter","PersonForm","Persons","personsService","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setFilter","loadData","getAll","then","data","catch","err","console","log","updatePerson","id","personData","update","map","p","createPerson","create","concat","deletePerson","delete_person","submitForm","e","preventDefault","newPerson","name","number","knownPerson","find","i","msg","window","confirm","onNameChange","target","value","onNumberChange","onFilterChange","onDeleteClick","toDeleteId","dataset","toDeleteObj","showPersons","toLowerCase","includes"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport personsService from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n\n  const loadData = () => {\n    personsService\n      .getAll()\n      .then((data) => setPersons(data))\n      .catch((err) => console.log(err));\n  };\n\n  useEffect(loadData, []);\n\n  const updatePerson = async (id, personData) => {\n    try {\n      const data = await personsService.update(id, personData);\n      setPersons(persons.map((p) => (p.id === data.id ? data : p)));\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const createPerson = async (personData) => {\n    try {\n      const data = await personsService.create(personData);\n      setPersons(persons.concat(data));\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const deletePerson = async function (id) {\n    try {\n      await personsService.delete_person(id);\n      setPersons(persons.filter((p) => p.id !== id));\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const submitForm = (e) => {\n    e.preventDefault();\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n    };\n    const knownPerson = persons.find((i) => i.name === newName);\n    if (knownPerson) {\n      const msg = `${newName} is already added to phonebook, replace the old number with a new one`;\n      if (!window.confirm(msg)) {\n        return;\n      }\n      updatePerson(knownPerson.id, newPerson);\n    } else {\n      createPerson(newPerson);\n    }\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const onNameChange = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const onNumberChange = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const onFilterChange = (e) => {\n    setFilter(e.target.value);\n  };\n\n  const onDeleteClick = (e) => {\n    const toDeleteId = +e.target.dataset.id;\n    const toDeleteObj = persons.find((p) => p.id === toDeleteId);\n    if (window.confirm(`Delete ${toDeleteObj.name}`)) {\n      deletePerson(toDeleteId);\n    }\n  };\n\n  const showPersons =\n    filter === \"\"\n      ? persons\n      : persons.filter((p) =>\n          p.name.toLowerCase().includes(filter.toLowerCase())\n        );\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Filter\n        onSubmit={submitForm}\n        filter={filter}\n        onFilterChange={onFilterChange}\n      />\n      <h3>add a new</h3>\n      <PersonForm\n        onSubmit={submitForm}\n        onNameChange={onNameChange}\n        onNumberChange={onNumberChange}\n        name={newName}\n        number={newNumber}\n      />\n      <h3>Numbers</h3>\n      <Persons persons={showPersons} onDeleteClick={onDeleteClick} />\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}